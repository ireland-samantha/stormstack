# Production configuration for AWS deployment
# Activated with: -Dquarkus.profile=prod or QUARKUS_PROFILE=prod

# HTTP configuration
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# CORS - MUST be explicitly configured in production via CORS_ORIGINS env var
# Do NOT use wildcard (*) in production - set specific allowed origins
quarkus.http.cors=true
quarkus.http.cors.origins=${CORS_ORIGINS}
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization

# Logging - less verbose in production
quarkus.log.level=INFO
quarkus.log.category."ca.samanthaireland".level=INFO
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n

# Health checks for ALB
quarkus.smallrye-health.root-path=/health
quarkus.health.extensions.enabled=true

# Jackson configuration
quarkus.jackson.fail-on-unknown-properties=false

# Simulation configuration
simulation.snapshot.broadcast-interval-ms=${SNAPSHOT_BROADCAST_INTERVAL:100}

# ECS configuration
ecs.max-entities=${MAX_ENTITIES:1000000}
ecs.max-components=${MAX_COMPONENTS:100}

# Game loop configuration
gameloop.max-commands-per-tick=${MAX_COMMANDS_PER_TICK:10000}

# Storage paths (use volume mounts in ECS)
storage.modules-path=${MODULES_PATH:modules}
storage.resources-path=${RESOURCES_PATH:resources}

# Native image optimizations (if building native)
quarkus.native.additional-build-args=-H:+ReportExceptionStackTraces
