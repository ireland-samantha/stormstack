# Test configuration
# Allow unknown config properties
smallrye.config.mapping.validate-unknown=false

quarkus.mongodb.connection-string=mongodb://localhost:27017
quarkus.mongodb.database=lightning-auth-test

# Disable SmallRye JWT security (we use our own JWT handling)
quarkus.smallrye-jwt.enabled=false

# Create admin user for tests
auth.initial-admin-password=admin

# RSA key configuration for JWT signing (RS256)
auth.private-key-location=classpath:privateKey.pem
auth.public-key-location=classpath:publicKey.pem

# Use lower BCrypt cost for faster tests
auth.bcrypt-cost=4

# OAuth2 Configuration for tests
auth.oauth2.service-token-lifetime-seconds=900
auth.oauth2.user-token-lifetime-seconds=3600
auth.oauth2.refresh-token-lifetime-seconds=604800

# Test OAuth2 clients
auth.oauth2.clients[0].client-id=control-plane
auth.oauth2.clients[0].client-secret=control-plane-secret
auth.oauth2.clients[0].client-type=confidential
auth.oauth2.clients[0].display-name=Test Control Plane
auth.oauth2.clients[0].allowed-scopes=service.match-token.issue,service.match-token.validate
auth.oauth2.clients[0].allowed-grant-types=client_credentials
auth.oauth2.clients[0].enabled=true

auth.oauth2.clients[1].client-id=game-server
auth.oauth2.clients[1].client-secret=game-server-secret
auth.oauth2.clients[1].client-type=confidential
auth.oauth2.clients[1].display-name=Test Game Server
auth.oauth2.clients[1].allowed-scopes=service.match-token.validate
auth.oauth2.clients[1].allowed-grant-types=client_credentials
auth.oauth2.clients[1].enabled=true

auth.oauth2.clients[2].client-id=admin-cli
auth.oauth2.clients[2].client-secret=not-used
auth.oauth2.clients[2].client-type=public
auth.oauth2.clients[2].display-name=Admin CLI
auth.oauth2.clients[2].allowed-scopes=*
auth.oauth2.clients[2].allowed-grant-types=password,refresh_token
auth.oauth2.clients[2].enabled=true

auth.oauth2.clients[3].client-id=thunder-cli
auth.oauth2.clients[3].client-secret=not-used
auth.oauth2.clients[3].client-type=public
auth.oauth2.clients[3].display-name=Thunder CLI
auth.oauth2.clients[3].allowed-scopes=*
auth.oauth2.clients[3].allowed-grant-types=password,refresh_token,token_exchange
auth.oauth2.clients[3].enabled=true

auth.oauth2.clients[4].client-id=thunder-engine
auth.oauth2.clients[4].client-secret=thunder-engine-test-secret
auth.oauth2.clients[4].client-type=confidential
auth.oauth2.clients[4].display-name=Thunder Engine
auth.oauth2.clients[4].allowed-scopes=module.token.issue,module.token.refresh,module.token.verify,service.match-token.validate
auth.oauth2.clients[4].allowed-grant-types=client_credentials,urn:stormstack:grant-type:module-token
auth.oauth2.clients[4].enabled=true

# Rate limiting - disabled for faster tests
auth.ratelimit.enabled=false
auth.ratelimit.max-attempts-per-window=100
auth.ratelimit.window-seconds=60
auth.ratelimit.cleanup-interval-seconds=300
